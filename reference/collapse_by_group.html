<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Collapse raw data by random effect groups — collapse_by_group • ggeffects</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Collapse raw data by random effect groups — collapse_by_group" />
<meta property="og:description" content="This function extracts the raw data points (i.e. the data
  that was used to fit the model) and &quot;averages&quot; (i.e. &quot;collapses&quot;) the
  response variable over the levels of the grouping factor given in
  collapse.by. Only works with mixed models." />
<meta property="og:image" content="/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ggeffects</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.1.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Introductions
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/ggeffects.html">Adjusted Predictions of Regression Models</a>
    </li>
    <li>
      <a href="../articles/introduction_marginal_effects.html">Definition of Marginal Effects</a>
    </li>
    <li>
      <a href="../articles/introduction_effectsatvalues.html">Adjusted Predictions at Specific Values</a>
    </li>
    <li>
      <a href="../articles/introduction_randomeffects.html">Adjusted Predictions for Random Effects Models</a>
    </li>
    <li>
      <a href="../articles/introduction_partial_residuals.html">Adding Partial Residuals to Effects Plots</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Plotting
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/introduction_plotmethod.html">Plotting Adjusted Predictions</a>
    </li>
    <li>
      <a href="../articles/introduction_plotcustomize.html">Customize Plot Appearance</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Practical Examples
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/practical_logisticmixedmodel.html">Logistic Mixed Effects Model with Interaction Term</a>
    </li>
    <li>
      <a href="../articles/practical_robustestimation.html">(Cluster) Robust Standard Errors</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Technical Details
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/technical_differencepredictemmeans.html">Difference between ggpredict() and ggemmeans()</a>
    </li>
    <li>
      <a href="../articles/technical_stata.html">Different Output between Stata and ggeffects</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/strengejacke/ggeffects/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Collapse raw data by random effect groups</h1>
    <small class="dont-index">Source: <a href='https://github.com/strengejacke/ggeffects/blob/master/R/collapse_re_data.R'><code>R/collapse_re_data.R</code></a></small>
    <div class="hidden name"><code>collapse_by_group.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function extracts the raw data points (i.e. the data
  that was used to fit the model) and "averages" (i.e. "collapses") the
  response variable over the levels of the grouping factor given in
  <code>collapse.by</code>. Only works with mixed models.</p>
    </div>

    <pre class="usage"><span class='fu'>collapse_by_group</span><span class='op'>(</span><span class='va'>grid</span>, <span class='va'>model</span>, collapse.by <span class='op'>=</span> <span class='cn'>NULL</span>, residuals <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>grid</th>
      <td><p>A data frame representing the data grid, or an object of class <code>ggeffects</code>, as returned by <code><a href='ggeffect.html'>ggpredict()</a></code> and others.</p></td>
    </tr>
    <tr>
      <th>model</th>
      <td><p>The model for which to compute partial residuals. The data grid <code>grid</code> should match to predictors in the model.</p></td>
    </tr>
    <tr>
      <th>collapse.by</th>
      <td><p>Name of the (random effects) grouping factor. Data is
collapsed by the levels of this factor.</p></td>
    </tr>
    <tr>
      <th>residuals</th>
      <td><p>Logical, if <code>TRUE</code>, collapsed partial residuals instead
of raw data by the levels of the grouping factor.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A data frame with raw data points, averaged over the levels of
  the given grouping factor from the random effects. The group level of
  the random effect is saved in the column <code>"random"</code>.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='r-in'><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://strengejacke.github.io/ggeffects/'>ggeffects</a></span><span class='op'>)</span></span>
<span class='r-in'><span class='kw'>if</span> <span class='op'>(</span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>require</a></span><span class='op'>(</span><span class='st'><a href='https://github.com/lme4/lme4/'>"lme4"</a></span>, quietly <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>{</span></span>
<span class='r-in'>  <span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='va'>efc</span><span class='op'>)</span></span>
<span class='r-in'>  <span class='va'>efc</span><span class='op'>$</span><span class='va'>e15relat</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>as.factor</a></span><span class='op'>(</span><span class='va'>efc</span><span class='op'>$</span><span class='va'>e15relat</span><span class='op'>)</span></span>
<span class='r-in'>  <span class='va'>efc</span><span class='op'>$</span><span class='va'>c161sex</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>as.factor</a></span><span class='op'>(</span><span class='va'>efc</span><span class='op'>$</span><span class='va'>c161sex</span><span class='op'>)</span></span>
<span class='r-in'>  <span class='fu'><a href='https://rdrr.io/r/base/levels.html'>levels</a></span><span class='op'>(</span><span class='va'>efc</span><span class='op'>$</span><span class='va'>c161sex</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"male"</span>, <span class='st'>"female"</span><span class='op'>)</span></span>
<span class='r-in'>  <span class='va'>model</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/lme4/man/lmer.html'>lmer</a></span><span class='op'>(</span><span class='va'>neg_c_7</span> <span class='op'>~</span> <span class='va'>c161sex</span> <span class='op'>+</span> <span class='op'>(</span><span class='fl'>1</span> <span class='op'>|</span> <span class='va'>e15relat</span><span class='op'>)</span>, data <span class='op'>=</span> <span class='va'>efc</span><span class='op'>)</span></span>
<span class='r-in'>  <span class='va'>me</span> <span class='op'>&lt;-</span> <span class='fu'><a href='ggeffect.html'>ggpredict</a></span><span class='op'>(</span><span class='va'>model</span>, terms <span class='op'>=</span> <span class='st'>"c161sex"</span><span class='op'>)</span></span>
<span class='r-in'>  <span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/attributes.html'>attributes</a></span><span class='op'>(</span><span class='va'>me</span><span class='op'>)</span><span class='op'>$</span><span class='va'>rawdata</span><span class='op'>)</span></span>
<span class='r-in'>  <span class='fu'>collapse_by_group</span><span class='op'>(</span><span class='va'>me</span>, <span class='va'>model</span>, <span class='st'>"e15relat"</span><span class='op'>)</span></span>
<span class='r-in'><span class='op'>}</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>    x group_col facet random  response</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 1  1         1     1      1 12.297872</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 2  2         1     1      1 13.347107</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 3  1         1     1      2 11.585586</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 4  2         1     1      2 12.118310</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 5  1         1     1      3 12.166667</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 6  2         1     1      3 10.545455</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 7  1         1     1      4 10.750000</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 8  2         1     1      4 11.726027</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 9  1         1     1      5 11.333333</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 10 2         1     1      5 10.235294</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 11 1         1     1      6  8.200000</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 12 2         1     1      6  9.235294</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 13 1         1     1      7 13.000000</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 14 2         1     1      7 10.400000</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 15 1         1     1      8  9.666667</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 16 2         1     1      8 10.955882</span>
</pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://github.com/strengejacke'>Daniel Lüdecke</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


