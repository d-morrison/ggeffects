<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ggeffects: Marginal Effects of Regression Models • ggeffects</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="ggeffects: Marginal Effects of Regression Models">
<meta property="og:description" content="ggeffects">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ggeffects</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Introductions
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/ggeffects.html">Marginal Effects of Regression Models</a>
    </li>
    <li>
      <a href="../articles/introduction_effectsatvalues.html">Marginal Effects at Specific Values</a>
    </li>
    <li>
      <a href="../articles/introduction_randomeffects.html">Marginal Effects for Random Effects Models</a>
    </li>
    <li>
      <a href="../articles/introduction_partial_residuals.html">Adding Partial Residuals to Marginal Effects Plots</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Plotting
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/introduction_plotmethod.html">Plotting Marginal Effects</a>
    </li>
    <li>
      <a href="../articles/introduction_plotcustomize.html">Customize Plot Appearance</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Practical Examples
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/practical_logisticmixedmodel.html">Logistic Mixed Effects Model with Interaction Term</a>
    </li>
    <li>
      <a href="../articles/practical_robustestimation.html">(Cluster) Robust Standard Errors</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Technical Details
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/technical_differencepredictemmeans.html">Difference between ggpredict() and ggemmeans()</a>
    </li>
    <li>
      <a href="../articles/technical_stata.html">Different Output between Stata and ggeffects</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/strengejacke/ggeffects/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="ggeffects_files/accessible-code-block-0.0.1/empty-anchor.js"></script><link href="ggeffects_files/anchor-sections-1.0/anchor-sections.css" rel="stylesheet">
<script src="ggeffects_files/anchor-sections-1.0/anchor-sections.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>ggeffects: Marginal Effects of Regression Models</h1>
                        <h4 class="author">Daniel Lüdecke</h4>
            
            <h4 class="date">2020-12-13</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/strengejacke/ggeffects/blob/master/vignettes/ggeffects.Rmd"><code>vignettes/ggeffects.Rmd</code></a></small>
      <div class="hidden name"><code>ggeffects.Rmd</code></div>

    </div>

    
    
<div id="aim-of-the-ggeffects-package" class="section level1">
<h1 class="hasAnchor">
<a href="#aim-of-the-ggeffects-package" class="anchor"></a>Aim of the ggeffects-package</h1>
<p>Results of regression models are typically presented as tables that are easy to understand. For more complex models that include interaction or quadratic / spline terms, tables with numbers are less helpful and more difficult to interpret. In such cases, the visualization of <em>marginal effects</em> is far easier to understand and allows to intuitively get the idea of how predictors and outcome are associated, even for complex models.</p>
<p><strong>ggeffects</strong> computes marginal effects (or: <em>estimated marginal means</em>) at the mean (MEM) or at representative values (MER) from statistical models, i.e. predictions generated by a model when one holds the non-focal variables constant and varies the focal variable(s). The result is returned as data frame with consistent structure, especially for further use with <a href="https://cran.r-project.org/package=ggplot2">ggplot</a>. Definitions of “marginal effects” <a href="https://stats.stackexchange.com/tags/marginal-effect/info">can be found here</a>.</p>
<p>Since the focus lies on plotting the data (the marginal effects), at least one model term needs to be specified for which the effects are computed. It is also possible to compute marginal effects for model terms, grouped by the levels of another model’s predictor. The package also allows plotting marginal effects for two-, three- or four-way-interactions, or for specific values of a model term only. Examples are shown below.</p>
<div id="short-technical-note" class="section level2">
<h2 class="hasAnchor">
<a href="#short-technical-note" class="anchor"></a>Short technical note</h2>
<p><code><a href="../reference/ggeffect.html">ggpredict()</a></code>, <code><a href="../reference/ggeffect.html">ggemmeans()</a></code> and <code><a href="../reference/ggeffect.html">ggeffect()</a></code> always return predicted values for the <em>response</em> of a model (or <em>response distribution</em> for Bayesian models).</p>
<p>Typically, <code><a href="../reference/ggeffect.html">ggpredict()</a></code> returns confidence intervals based on the standard errors as returned by the <code><a href="https://rdrr.io/r/stats/predict.html">predict()</a></code>-function, assuming normal distribution (<code>+/- 1.96 * SE</code>). If <code><a href="https://rdrr.io/r/stats/predict.html">predict()</a></code> for a certain class does <em>not</em> return standard errors (for example, <em>merMod</em>-objects), these are calculated manually, by following steps: matrix-multiply <code>X</code> by the parameter vector <code>B</code> to get the predictions, then extract the variance-covariance matrix <code>V</code> of the parameters and compute <code>XVX'</code> to get the variance-covariance matrix of the predictions. The square-root of the diagonal of this matrix represent the standard errors of the predictions, which are then multiplied by 1.96 for the confidence intervals.</p>
<p>For mixed models, if <code>type = "random"</code> or <code>type = "zi_random"</code>, the uncertainty in the random effects is accounted for when calculating the standard errors. Hence, in such cases, the intervals may be considered as <em>prediction intervals</em>.</p>
</div>
<div id="consistent-and-tidy-structure" class="section level2">
<h2 class="hasAnchor">
<a href="#consistent-and-tidy-structure" class="anchor"></a>Consistent and tidy structure</h2>
<p>The returned data frames always have the same, consistent structure and column names, so it’s easy to create ggplot-plots without the need to re-write the arguments to be mapped in each ggplot-call. <code>x</code> and <code>predicted</code> are the values for the x- and y-axis. <code>conf.low</code> and <code>conf.high</code> could be used as <code>ymin</code> and <code>ymax</code> aesthetics for ribbons to add confidence bands to the plot. <code>group</code> can be used as grouping-aesthetics, or for faceting.</p>
<p>The examples shown here mostly use <strong>ggplot2</strong>-code for the plots, however, there is also a <code><a href="../reference/plot.html">plot()</a></code>-method, which is described in the vignette <a href="introduction_plotmethod.html">Plotting Marginal Effects</a>.</p>
</div>
</div>
<div id="marginal-effects-at-the-mean" class="section level1">
<h1 class="hasAnchor">
<a href="#marginal-effects-at-the-mean" class="anchor"></a>Marginal effects at the mean</h1>
<p><code><a href="../reference/ggeffect.html">ggpredict()</a></code> computes predicted values for all possible levels and values from a model’s predictors. In the simplest case, a fitted model is passed as first argument, and the term in question as second argument. Use the raw name of the variable for the <code>terms</code>-argument only - you don’t need to write things like <code><a href="https://rdrr.io/r/stats/poly.html">poly(term, 3)</a></code> or <code><a href="https://rdrr.io/r/base/AsIs.html">I(term^2)</a></code> for the <code>terms</code>-argument.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://strengejacke.github.io/ggeffects/">ggeffects</a></span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">efc</span><span class="op">)</span>
<span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">barthtot</span> <span class="op">~</span> <span class="va">c12hour</span> <span class="op">+</span> <span class="va">neg_c_7</span> <span class="op">+</span> <span class="va">c161sex</span> <span class="op">+</span> <span class="va">c172code</span>, data <span class="op">=</span> <span class="va">efc</span><span class="op">)</span>

<span class="fu"><a href="../reference/ggeffect.html">ggpredict</a></span><span class="op">(</span><span class="va">fit</span>, terms <span class="op">=</span> <span class="st">"c12hour"</span><span class="op">)</span>
<span class="co">#&gt; # Predicted values of Total score BARTHEL INDEX</span>
<span class="co">#&gt; # x = average number of hours of care per week</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   x | Predicted |         95% CI</span>
<span class="co">#&gt; --------------------------------</span>
<span class="co">#&gt;   0 |     75.44 | [73.26, 77.63]</span>
<span class="co">#&gt;  20 |     70.38 | [68.56, 72.19]</span>
<span class="co">#&gt;  45 |     64.05 | [62.39, 65.70]</span>
<span class="co">#&gt;  65 |     58.98 | [57.16, 60.80]</span>
<span class="co">#&gt;  85 |     53.91 | [51.71, 56.11]</span>
<span class="co">#&gt; 105 |     48.85 | [46.15, 51.55]</span>
<span class="co">#&gt; 125 |     43.78 | [40.52, 47.05]</span>
<span class="co">#&gt; 170 |     32.38 | [27.73, 37.03]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Adjusted for:</span>
<span class="co">#&gt; *  neg_c_7 = 11.84</span>
<span class="co">#&gt; *  c161sex =  1.76</span>
<span class="co">#&gt; * c172code =  1.97</span></code></pre></div>
<p>As you can see, <code><a href="../reference/ggeffect.html">ggpredict()</a></code> (and <code><a href="../reference/ggeffect.html">ggeffect()</a></code> or <code><a href="../reference/ggeffect.html">ggemmeans()</a></code>) has a nice <code><a href="https://rdrr.io/r/base/print.html">print()</a></code>-method, which takes care of printing not too many rows (but always an equally spaced range of values, including minimum and maximum value of the term in question) and giving some extra information. This is especially useful when predicted values are shown depending on the levels of other terms (see below).</p>
<p>The output shows the predicted values for the response at each value from the term <em>c12hour</em>. The data is already in shape for ggplot:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme_get.html">theme_set</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_bw</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>

<span class="va">mydf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ggeffect.html">ggpredict</a></span><span class="op">(</span><span class="va">fit</span>, terms <span class="op">=</span> <span class="st">"c12hour"</span><span class="op">)</span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mydf</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">predicted</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="ggeffects_files/figure-html/unnamed-chunk-2-1.png" width="672"></p>
</div>
<div id="marginal-effects-at-the-mean-by-other-predictors-levels" class="section level1">
<h1 class="hasAnchor">
<a href="#marginal-effects-at-the-mean-by-other-predictors-levels" class="anchor"></a>Marginal effects at the mean by other predictors’ levels</h1>
<p>The <code>terms</code>-argument accepts up to four model terms, where the second to fourth terms indicate grouping levels. This allows predictions for the term in question at different levels for other model terms:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/ggeffect.html">ggpredict</a></span><span class="op">(</span><span class="va">fit</span>, terms <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"c12hour"</span>, <span class="st">"c172code"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; # Predicted values of Total score BARTHEL INDEX</span>
<span class="co">#&gt; # x = average number of hours of care per week</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; # c172code = low level of education</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   x | Predicted |         95% CI</span>
<span class="co">#&gt; --------------------------------</span>
<span class="co">#&gt;   0 |     74.75 | [71.27, 78.23]</span>
<span class="co">#&gt;  30 |     67.15 | [64.04, 70.26]</span>
<span class="co">#&gt;  55 |     60.81 | [57.78, 63.85]</span>
<span class="co">#&gt;  85 |     53.22 | [49.96, 56.47]</span>
<span class="co">#&gt; 115 |     45.62 | [41.87, 49.37]</span>
<span class="co">#&gt; 170 |     31.69 | [26.60, 36.77]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; # c172code = intermediate level of education</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   x | Predicted |         95% CI</span>
<span class="co">#&gt; --------------------------------</span>
<span class="co">#&gt;   0 |     75.46 | [73.28, 77.65]</span>
<span class="co">#&gt;  30 |     67.87 | [66.17, 69.57]</span>
<span class="co">#&gt;  55 |     61.53 | [59.82, 63.24]</span>
<span class="co">#&gt;  85 |     53.93 | [51.73, 56.14]</span>
<span class="co">#&gt; 115 |     46.34 | [43.35, 49.32]</span>
<span class="co">#&gt; 170 |     32.40 | [27.75, 37.06]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; # c172code = high level of education</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   x | Predicted |         95% CI</span>
<span class="co">#&gt; --------------------------------</span>
<span class="co">#&gt;   0 |     76.18 | [72.82, 79.55]</span>
<span class="co">#&gt;  30 |     68.58 | [65.42, 71.75]</span>
<span class="co">#&gt;  55 |     62.25 | [59.01, 65.50]</span>
<span class="co">#&gt;  85 |     54.65 | [51.04, 58.26]</span>
<span class="co">#&gt; 115 |     47.05 | [42.85, 51.25]</span>
<span class="co">#&gt; 170 |     33.12 | [27.51, 38.73]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Adjusted for:</span>
<span class="co">#&gt; * neg_c_7 = 11.84</span>
<span class="co">#&gt; * c161sex =  1.76</span></code></pre></div>
<p>Creating a ggplot is pretty straightforward: the <code>colour</code>-aesthetics is mapped with the <code>group</code>-column:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">mydf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ggeffect.html">ggpredict</a></span><span class="op">(</span><span class="va">fit</span>, terms <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"c12hour"</span>, <span class="st">"c172code"</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mydf</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">predicted</span>, colour <span class="op">=</span> <span class="va">group</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="ggeffects_files/figure-html/unnamed-chunk-4-1.png" width="672"></p>
<p>A second grouping structure can be defined, which will create another column named <code>facet</code>, which - as the name implies - might be used to create a facted plot:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">mydf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ggeffect.html">ggpredict</a></span><span class="op">(</span><span class="va">fit</span>, terms <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"c12hour"</span>, <span class="st">"c172code"</span>, <span class="st">"c161sex"</span><span class="op">)</span><span class="op">)</span>
<span class="va">mydf</span>
<span class="co">#&gt; # Predicted values of Total score BARTHEL INDEX</span>
<span class="co">#&gt; # x = average number of hours of care per week</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; # c172code = low level of education</span>
<span class="co">#&gt; #  c161sex = [1] Male</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   x | Predicted |         95% CI</span>
<span class="co">#&gt; --------------------------------</span>
<span class="co">#&gt;   0 |     73.95 | [69.35, 78.55]</span>
<span class="co">#&gt;  45 |     62.56 | [58.23, 66.88]</span>
<span class="co">#&gt;  85 |     52.42 | [47.90, 56.95]</span>
<span class="co">#&gt; 170 |     30.89 | [24.85, 36.94]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; # c172code = intermediate level of education</span>
<span class="co">#&gt; #  c161sex = [1] Male</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   x | Predicted |         95% CI</span>
<span class="co">#&gt; --------------------------------</span>
<span class="co">#&gt;   0 |     74.67 | [71.06, 78.29]</span>
<span class="co">#&gt;  45 |     63.27 | [59.88, 66.66]</span>
<span class="co">#&gt;  85 |     53.14 | [49.40, 56.89]</span>
<span class="co">#&gt; 170 |     31.61 | [25.98, 37.24]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; # c172code = high level of education</span>
<span class="co">#&gt; #  c161sex = [1] Male</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   x | Predicted |         95% CI</span>
<span class="co">#&gt; --------------------------------</span>
<span class="co">#&gt;   0 |     75.39 | [71.04, 79.74]</span>
<span class="co">#&gt;  45 |     63.99 | [59.73, 68.26]</span>
<span class="co">#&gt;  85 |     53.86 | [49.23, 58.49]</span>
<span class="co">#&gt; 170 |     32.33 | [25.95, 38.71]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; # c172code = low level of education</span>
<span class="co">#&gt; #  c161sex = [2] Female</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   x | Predicted |         95% CI</span>
<span class="co">#&gt; --------------------------------</span>
<span class="co">#&gt;   0 |     75.00 | [71.41, 78.59]</span>
<span class="co">#&gt;  45 |     63.60 | [60.46, 66.74]</span>
<span class="co">#&gt;  85 |     53.46 | [50.13, 56.80]</span>
<span class="co">#&gt; 170 |     31.93 | [26.83, 37.04]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; # c172code = intermediate level of education</span>
<span class="co">#&gt; #  c161sex = [2] Female</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   x | Predicted |         95% CI</span>
<span class="co">#&gt; --------------------------------</span>
<span class="co">#&gt;   0 |     75.71 | [73.31, 78.12]</span>
<span class="co">#&gt;  45 |     64.32 | [62.42, 66.21]</span>
<span class="co">#&gt;  85 |     54.18 | [51.81, 56.55]</span>
<span class="co">#&gt; 170 |     32.65 | [27.94, 37.36]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; # c172code = high level of education</span>
<span class="co">#&gt; #  c161sex = [2] Female</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   x | Predicted |         95% CI</span>
<span class="co">#&gt; --------------------------------</span>
<span class="co">#&gt;   0 |     76.43 | [72.89, 79.98]</span>
<span class="co">#&gt;  45 |     65.03 | [61.68, 68.39]</span>
<span class="co">#&gt;  85 |     54.90 | [51.16, 58.65]</span>
<span class="co">#&gt; 170 |     33.37 | [27.70, 39.05]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Adjusted for:</span>
<span class="co">#&gt; * neg_c_7 = 11.84</span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mydf</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">predicted</span>, colour <span class="op">=</span> <span class="va">group</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">facet</span><span class="op">)</span></code></pre></div>
<p><img src="ggeffects_files/figure-html/unnamed-chunk-5-1.png" width="672"></p>
<p>Finally, a third differentation can be defined, creating another column named <code>panel</code>. In such cases, you may create multiple plots (for each value in <code>panel</code>). <strong>ggeffects</strong> takes care of this when you use <code><a href="../reference/plot.html">plot()</a></code> and automatically creates an integrated plot with all panels in one figure.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">mydf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ggeffect.html">ggpredict</a></span><span class="op">(</span><span class="va">fit</span>, terms <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"c12hour"</span>, <span class="st">"c172code"</span>, <span class="st">"c161sex"</span>, <span class="st">"neg_c_7"</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="../reference/plot.html">plot</a></span><span class="op">(</span><span class="va">mydf</span><span class="op">)</span></code></pre></div>
<p><img src="ggeffects_files/figure-html/unnamed-chunk-6-1.png" width="672"></p>
</div>
<div id="marginal-effects-for-each-model-term" class="section level1">
<h1 class="hasAnchor">
<a href="#marginal-effects-for-each-model-term" class="anchor"></a>Marginal effects for each model term</h1>
<p>If the <code>term</code> argument is either missing or <code>NULL</code>, marginal effects for each model term are calculated. The result is returned as a list, which can be plotted manually (or using the <code><a href="../reference/plot.html">plot()</a></code> function).</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">mydf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ggeffect.html">ggpredict</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span>
<span class="va">mydf</span>
<span class="co">#&gt; $c12hour</span>
<span class="co">#&gt; # Predicted values of Total score BARTHEL INDEX</span>
<span class="co">#&gt; # x = average number of hours of care per week</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   x | Predicted |         95% CI</span>
<span class="co">#&gt; --------------------------------</span>
<span class="co">#&gt;   0 |     75.44 | [73.26, 77.63]</span>
<span class="co">#&gt;  20 |     70.38 | [68.56, 72.19]</span>
<span class="co">#&gt;  45 |     64.05 | [62.39, 65.70]</span>
<span class="co">#&gt;  65 |     58.98 | [57.16, 60.80]</span>
<span class="co">#&gt;  85 |     53.91 | [51.71, 56.11]</span>
<span class="co">#&gt; 105 |     48.85 | [46.15, 51.55]</span>
<span class="co">#&gt; 125 |     43.78 | [40.52, 47.05]</span>
<span class="co">#&gt; 170 |     32.38 | [27.73, 37.03]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Adjusted for:</span>
<span class="co">#&gt; *  neg_c_7 = 11.84</span>
<span class="co">#&gt; *  c161sex =  1.76</span>
<span class="co">#&gt; * c172code =  1.97</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $neg_c_7</span>
<span class="co">#&gt; # Predicted values of Total score BARTHEL INDEX</span>
<span class="co">#&gt; # x = Negative impact with 7 items</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  x | Predicted |         95% CI</span>
<span class="co">#&gt; -------------------------------</span>
<span class="co">#&gt;  6 |     78.17 | [75.11, 81.22]</span>
<span class="co">#&gt;  8 |     73.57 | [71.21, 75.94]</span>
<span class="co">#&gt; 12 |     64.38 | [62.73, 66.03]</span>
<span class="co">#&gt; 14 |     59.79 | [57.88, 61.69]</span>
<span class="co">#&gt; 16 |     55.19 | [52.73, 57.66]</span>
<span class="co">#&gt; 20 |     46.00 | [42.04, 49.97]</span>
<span class="co">#&gt; 22 |     41.41 | [36.63, 46.19]</span>
<span class="co">#&gt; 28 |     27.63 | [20.31, 34.95]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Adjusted for:</span>
<span class="co">#&gt; *  c12hour = 42.20</span>
<span class="co">#&gt; *  c161sex =  1.76</span>
<span class="co">#&gt; * c172code =  1.97</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $c161sex</span>
<span class="co">#&gt; # Predicted values of Total score BARTHEL INDEX</span>
<span class="co">#&gt; # x = carer's gender</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; x | Predicted |         95% CI</span>
<span class="co">#&gt; ------------------------------</span>
<span class="co">#&gt; 1 |     63.96 | [60.57, 67.35]</span>
<span class="co">#&gt; 2 |     65.00 | [63.11, 66.90]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Adjusted for:</span>
<span class="co">#&gt; *  c12hour = 42.20</span>
<span class="co">#&gt; *  neg_c_7 = 11.84</span>
<span class="co">#&gt; * c172code =  1.97</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $c172code</span>
<span class="co">#&gt; # Predicted values of Total score BARTHEL INDEX</span>
<span class="co">#&gt; # x = carer's level of education</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; x | Predicted |         95% CI</span>
<span class="co">#&gt; ------------------------------</span>
<span class="co">#&gt; 1 |     64.06 | [61.01, 67.10]</span>
<span class="co">#&gt; 2 |     64.78 | [63.12, 66.43]</span>
<span class="co">#&gt; 3 |     65.49 | [62.32, 68.67]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Adjusted for:</span>
<span class="co">#&gt; * c12hour = 42.20</span>
<span class="co">#&gt; * neg_c_7 = 11.84</span>
<span class="co">#&gt; * c161sex =  1.76</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; attr(,"class")</span>
<span class="co">#&gt; [1] "ggalleffects" "list"        </span>
<span class="co">#&gt; attr(,"model.name")</span>
<span class="co">#&gt; [1] "fit"</span></code></pre></div>
</div>
<div id="two-way-three-way--and-four-way-interactions" class="section level1">
<h1 class="hasAnchor">
<a href="#two-way-three-way--and-four-way-interactions" class="anchor"></a>Two-Way, Three-Way- and Four-Way-Interactions</h1>
<p>To plot the marginal effects of interaction terms, simply specify these terms in the <code>terms</code>-argument.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://strengejacke.github.io/sjmisc">sjmisc</a></span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">efc</span><span class="op">)</span>

<span class="co"># make categorical</span>
<span class="va">efc</span><span class="op">$</span><span class="va">c161sex</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://strengejacke.github.io/sjmisc/reference/to_factor.html">to_factor</a></span><span class="op">(</span><span class="va">efc</span><span class="op">$</span><span class="va">c161sex</span><span class="op">)</span>

<span class="co"># fit model with interaction</span>
<span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">neg_c_7</span> <span class="op">~</span> <span class="va">c12hour</span> <span class="op">+</span> <span class="va">barthtot</span> <span class="op">*</span> <span class="va">c161sex</span>, data <span class="op">=</span> <span class="va">efc</span><span class="op">)</span>

<span class="co"># select only levels 30, 50 and 70 from continuous variable Barthel-Index</span>
<span class="va">mydf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ggeffect.html">ggpredict</a></span><span class="op">(</span><span class="va">fit</span>, terms <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"barthtot [30,50,70]"</span>, <span class="st">"c161sex"</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mydf</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">predicted</span>, colour <span class="op">=</span> <span class="va">group</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="ggeffects_files/figure-html/unnamed-chunk-8-1.png" width="672"></p>
<p>Since the <code>terms</code>-argument accepts up to four model terms, you can also compute marginal effects for a 3-way-interaction or 4-way-interaction. To plot the marginal effects of three interaction terms, just like before, specify all three terms in the <code>terms</code>-argument.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># fit model with 3-way-interaction</span>
<span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">neg_c_7</span> <span class="op">~</span> <span class="va">c12hour</span> <span class="op">*</span> <span class="va">barthtot</span> <span class="op">*</span> <span class="va">c161sex</span>, data <span class="op">=</span> <span class="va">efc</span><span class="op">)</span>

<span class="co"># select only levels 30, 50 and 70 from continuous variable Barthel-Index</span>
<span class="va">mydf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ggeffect.html">ggpredict</a></span><span class="op">(</span><span class="va">fit</span>, terms <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"c12hour"</span>, <span class="st">"barthtot [30,50,70]"</span>, <span class="st">"c161sex"</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mydf</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">predicted</span>, colour <span class="op">=</span> <span class="va">group</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">facet</span><span class="op">)</span></code></pre></div>
<p><img src="ggeffects_files/figure-html/unnamed-chunk-9-1.png" width="672"></p>
<p>4-way-interactions are rather confusing to print and plot. When plotting, multiple plots (for each level of the fourth interaction term) are plotted for the remaining three interaction terms. This can easily be done using the <a href="https://strengejacke.github.io/ggeffects/articles/introduction_plotmethod.html"><code>plot()</code>-method</a>.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># fit model with 4-way-interaction</span>
<span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">neg_c_7</span> <span class="op">~</span> <span class="va">c12hour</span> <span class="op">*</span> <span class="va">barthtot</span> <span class="op">*</span> <span class="va">c161sex</span> <span class="op">*</span> <span class="va">c172code</span>, data <span class="op">=</span> <span class="va">efc</span><span class="op">)</span>

<span class="co"># marginal effects for all 4 interaction terms</span>
<span class="va">pr</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ggeffect.html">ggpredict</a></span><span class="op">(</span><span class="va">fit</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"c12hour"</span>, <span class="st">"barthtot"</span>, <span class="st">"c161sex"</span>, <span class="st">"c172code"</span><span class="op">)</span><span class="op">)</span>

<span class="co"># use plot() method, easier than own ggplot-code from scratch</span>
<span class="fu"><a href="../reference/plot.html">plot</a></span><span class="op">(</span><span class="va">pr</span><span class="op">)</span></code></pre></div>
<p><img src="ggeffects_files/figure-html/unnamed-chunk-10-1.png" width="672"></p>
</div>
<div id="polynomial-terms-and-splines" class="section level1">
<h1 class="hasAnchor">
<a href="#polynomial-terms-and-splines" class="anchor"></a>Polynomial terms and splines</h1>
<p><code><a href="../reference/ggeffect.html">ggpredict()</a></code> also works for models with polynomial terms or splines. Following code reproduces the plot from <code><a href="https://rdrr.io/r/splines/bs.html">?splines::bs</a></code>:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">splines</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">women</span><span class="op">)</span>

<span class="va">fm1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">weight</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/splines/bs.html">bs</a></span><span class="op">(</span><span class="va">height</span>, df <span class="op">=</span> <span class="fl">5</span><span class="op">)</span>, data <span class="op">=</span> <span class="va">women</span><span class="op">)</span>
<span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ggeffect.html">ggpredict</a></span><span class="op">(</span><span class="va">fm1</span>, <span class="st">"height"</span><span class="op">)</span>

<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">dat</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">predicted</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="ggeffects_files/figure-html/unnamed-chunk-11-1.png" width="672"></p>
</div>
<div id="survival-models" class="section level1">
<h1 class="hasAnchor">
<a href="#survival-models" class="anchor"></a>Survival models</h1>
<p><code><a href="../reference/ggeffect.html">ggpredict()</a></code> also supports <code>coxph</code>-models from the <strong>survival</strong>-package and is able to either plot risk-scores (the default), probabilities of survival (<code>type = "surv"</code>) or cumulative hazards (<code>type = "cumhaz"</code>).</p>
<p>Since probabilities of survival and cumulative hazards are changing across time, the time-variable is automatically used as x-axis in such cases, so the <code>terms</code>-argument only needs up to <strong>two</strong> variables for <code>type = "surv"</code> or <code>type = "cumhaz"</code>.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="st">"lung"</span>, package <span class="op">=</span> <span class="st">"survival"</span><span class="op">)</span>
<span class="co"># remove category 3 (outlier)</span>
<span class="va">lung</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">lung</span>, subset <span class="op">=</span> <span class="va">ph.ecog</span> <span class="op">%in%</span> <span class="fl">0</span><span class="op">:</span><span class="fl">2</span><span class="op">)</span>
<span class="va">lung</span><span class="op">$</span><span class="va">sex</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">lung</span><span class="op">$</span><span class="va">sex</span>, labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"male"</span>, <span class="st">"female"</span><span class="op">)</span><span class="op">)</span>
<span class="va">lung</span><span class="op">$</span><span class="va">ph.ecog</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">lung</span><span class="op">$</span><span class="va">ph.ecog</span>, labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"good"</span>, <span class="st">"ok"</span>, <span class="st">"limited"</span><span class="op">)</span><span class="op">)</span>

<span class="va">m</span> <span class="op">&lt;-</span> <span class="fu">survival</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/coxph.html">coxph</a></span><span class="op">(</span><span class="fu">survival</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/Surv.html">Surv</a></span><span class="op">(</span><span class="va">time</span>, <span class="va">status</span><span class="op">)</span> <span class="op">~</span> <span class="va">sex</span> <span class="op">+</span> <span class="va">age</span> <span class="op">+</span> <span class="va">ph.ecog</span>, data <span class="op">=</span> <span class="va">lung</span><span class="op">)</span>

<span class="co"># predicted risk-scores</span>
<span class="fu"><a href="../reference/ggeffect.html">ggpredict</a></span><span class="op">(</span><span class="va">m</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"sex"</span>, <span class="st">"ph.ecog"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; # Predicted risk scores</span>
<span class="co">#&gt; # x = sex</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; # ph.ecog = good</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; x      | Predicted |       95% CI</span>
<span class="co">#&gt; ---------------------------------</span>
<span class="co">#&gt; male   |      0.83 | [0.62, 1.11]</span>
<span class="co">#&gt; female |      0.48 | [0.34, 0.68]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; # ph.ecog = ok</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; x      | Predicted |       95% CI</span>
<span class="co">#&gt; ---------------------------------</span>
<span class="co">#&gt; male   |      1.25 | [1.01, 1.54]</span>
<span class="co">#&gt; female |      0.72 | [0.57, 0.93]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; # ph.ecog = limited</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; x      | Predicted |       95% CI</span>
<span class="co">#&gt; ---------------------------------</span>
<span class="co">#&gt; male   |      2.04 | [1.50, 2.78]</span>
<span class="co">#&gt; female |      1.18 | [0.85, 1.66]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Adjusted for:</span>
<span class="co">#&gt; * age = 62.42</span></code></pre></div>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># probability of survival</span>
<span class="fu"><a href="../reference/ggeffect.html">ggpredict</a></span><span class="op">(</span><span class="va">m</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"sex"</span>, <span class="st">"ph.ecog"</span><span class="op">)</span>, type <span class="op">=</span> <span class="st">"surv"</span><span class="op">)</span>
<span class="co">#&gt; # Probability of Survival</span>
<span class="co">#&gt; # x = time</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; #    time = male</span>
<span class="co">#&gt; #     sex = good</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;    x | Predicted |       95% CI</span>
<span class="co">#&gt; -------------------------------</span>
<span class="co">#&gt;    5 |      1.00 | [0.99, 1.00]</span>
<span class="co">#&gt;  181 |      0.77 | [0.69, 0.87]</span>
<span class="co">#&gt;  276 |      0.65 | [0.54, 0.78]</span>
<span class="co">#&gt; 1022 |      0.09 | [0.03, 0.26]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; #    time = female</span>
<span class="co">#&gt; #     sex = good</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;    x | Predicted |       95% CI</span>
<span class="co">#&gt; -------------------------------</span>
<span class="co">#&gt;    5 |      1.00 | [0.99, 1.00]</span>
<span class="co">#&gt;  181 |      0.86 | [0.79, 0.93]</span>
<span class="co">#&gt;  276 |      0.78 | [0.68, 0.88]</span>
<span class="co">#&gt; 1022 |      0.24 | [0.11, 0.51]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; #    time = male</span>
<span class="co">#&gt; #     sex = limited</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;    x | Predicted |       95% CI</span>
<span class="co">#&gt; -------------------------------</span>
<span class="co">#&gt;    5 |      0.99 | [0.97, 1.00]</span>
<span class="co">#&gt;  181 |      0.53 | [0.40, 0.69]</span>
<span class="co">#&gt;  276 |      0.34 | [0.22, 0.52]</span>
<span class="co">#&gt; 1022 |      0.00 | [0.00, 0.04]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; #    time = female</span>
<span class="co">#&gt; #     sex = limited</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;    x | Predicted |       95% CI</span>
<span class="co">#&gt; -------------------------------</span>
<span class="co">#&gt;    5 |      1.00 | [0.98, 1.00]</span>
<span class="co">#&gt;  181 |      0.69 | [0.58, 0.82]</span>
<span class="co">#&gt;  276 |      0.53 | [0.40, 0.71]</span>
<span class="co">#&gt; 1022 |      0.03 | [0.00, 0.19]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; #    time = male</span>
<span class="co">#&gt; #     sex = ok</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;    x | Predicted |       95% CI</span>
<span class="co">#&gt; -------------------------------</span>
<span class="co">#&gt;    5 |      1.00 | [0.98, 1.00]</span>
<span class="co">#&gt;  181 |      0.68 | [0.59, 0.78]</span>
<span class="co">#&gt;  276 |      0.52 | [0.42, 0.64]</span>
<span class="co">#&gt; 1022 |      0.02 | [0.01, 0.11]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; #    time = female</span>
<span class="co">#&gt; #     sex = ok</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;    x | Predicted |       95% CI</span>
<span class="co">#&gt; -------------------------------</span>
<span class="co">#&gt;    5 |      1.00 | [0.99, 1.00]</span>
<span class="co">#&gt;  181 |      0.80 | [0.72, 0.88]</span>
<span class="co">#&gt;  276 |      0.68 | [0.59, 0.79]</span>
<span class="co">#&gt; 1022 |      0.12 | [0.04, 0.31]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Adjusted for:</span>
<span class="co">#&gt; * age = 62.42</span></code></pre></div>
</div>
<div id="labelling-the-data" class="section level1">
<h1 class="hasAnchor">
<a href="#labelling-the-data" class="anchor"></a>Labelling the data</h1>
<p><strong>ggeffects</strong> makes use of the <a href="https://cran.r-project.org/package=sjlabelled">sjlabelled-package</a> and supports <a href="https://cran.r-project.org/package=sjlabelled/vignettes/intro_sjlabelled.html">labelled data</a>. If the data from the fitted models is labelled, the value and variable label attributes are usually copied to the model frame stored in the model object. <strong>ggeffects</strong> provides various <em>getter</em>-functions to access these labels, which are returned as character vector and can be used in ggplot’s <code>lab()</code>- or <code>scale_*()</code>-functions.</p>
<ul>
<li>
<code><a href="../reference/get_title.html">get_title()</a></code> - a generic title for the plot, based on the model family, like “predicted values” or “predicted probabilities”</li>
<li>
<code><a href="../reference/get_title.html">get_x_title()</a></code> - the variable label of the first model term in <code>terms</code>.</li>
<li>
<code><a href="../reference/get_title.html">get_y_title()</a></code> - the variable label of the response.</li>
<li>
<code><a href="../reference/get_title.html">get_legend_title()</a></code> - the variable label of the second model term in <code>terms</code>.</li>
<li>
<code><a href="../reference/get_title.html">get_x_labels()</a></code> - value labels of the first model term in <code>terms</code>.</li>
<li>
<code><a href="../reference/get_title.html">get_legend_labels()</a></code> - value labels of the second model term in <code>terms</code>.</li>
</ul>
<p>The data frame returned by <code><a href="../reference/ggeffect.html">ggpredict()</a></code>, <code><a href="../reference/ggeffect.html">ggemmeans()</a></code> or <code><a href="../reference/ggeffect.html">ggeffect()</a></code> must be used as argument to one of the above function calls.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/get_title.html">get_x_title</a></span><span class="op">(</span><span class="va">mydf</span><span class="op">)</span>
<span class="co">#&gt; [1] "average number of hours of care per week"</span>
<span class="fu"><a href="../reference/get_title.html">get_y_title</a></span><span class="op">(</span><span class="va">mydf</span><span class="op">)</span>
<span class="co">#&gt; [1] "Negative impact with 7 items"</span>

<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mydf</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">predicted</span>, colour <span class="op">=</span> <span class="va">group</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">facet</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>
    x <span class="op">=</span> <span class="fu"><a href="../reference/get_title.html">get_x_title</a></span><span class="op">(</span><span class="va">mydf</span><span class="op">)</span>,
    y <span class="op">=</span> <span class="fu"><a href="../reference/get_title.html">get_y_title</a></span><span class="op">(</span><span class="va">mydf</span><span class="op">)</span>,
    colour <span class="op">=</span> <span class="fu"><a href="../reference/get_title.html">get_legend_title</a></span><span class="op">(</span><span class="va">mydf</span><span class="op">)</span>
  <span class="op">)</span></code></pre></div>
<p><img src="ggeffects_files/figure-html/unnamed-chunk-14-1.png" width="672"></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://github.com/strengejacke">Daniel Lüdecke</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
